import login from"./login.js";import user from"./add.js";$(()=>{let e=5,n=0,t=e;function s(s){let o=Math.ceil(s.data.length/e);console.log(o);for(let e=1;e<=o;e++)$(`<span class="pager"><a class="text-decoration-none" href="">${e}</a></span>`).appendTo(".page");!function(){let s=Array.from($(".pager"));for(let o=0;o<=s.length;o++)$(s[o]).on("click",()=>{let l=o+1;n=(l-1)*e,t=l*e,console.log(n,t),$(".pager").css({"border-style":"none"}),$(s[o]).css({"border-bottom":"0.5px solid black"}),axios.get("/users").then(e=>{$(".content-add").remove(),a(e,n,t)}),event.preventDefault()})}()}function a(e,n,t){e.data.slice(n,t).map(e=>{$(`<div class="content-add d-flex justify-content-between align-items-center">\n            <div class="add-id">\n              <span>${e.id}</span>\n            </div>\n            <div class="add-name">\n              <span>${e.fullname}</span>\n            </div>\n            <div class="add-gender">\n              <span>${e.gender}</span>\n            </div>\n            <div class="add-age">\n              <span>${e.age}</span>\n            </div>\n            <div class="add-email">\n              <span>${e.email}</span>\n            </div>\n            <div class="add-phone">\n              <span>${e.phone}</span>\n            </div>\n          </div>`).prependTo(".per-add")})}$(".btn-regis").on("click",()=>{let e=$(".re-user").val(),n=$(".re-password").val();""===e||""===n?($(".reUser-help").text("Không được để trống User"),$(".rePass-help").text("Không được để trống Password")):axios.get("/logins").then(t=>{"object"==typeof t.data.find(n=>n.user===e)?($(".reUser-help").text("Tài khoản này đã tồn tại!"),$(".rePass-help").text("Tài khoản này đã tồn tại!")):(axios.post("/logins",login(e,n)).then(e=>console.log(e)),$(".reUser-help").text("Đã tạo thành công!!!").css({color:"green"}),$(".rePass-help").text("Đã tạo thành công!!!").css({color:"green"}),$(".re-user").val(""),$(".re-password").val(""))}),event.preventDefault()}),$(".btn-login").on("click",()=>{let e=$(".user").val(),o=$(".password").val();axios.get("/logins").then(n=>{"object"==typeof n.data.find(n=>{if(n.user===e&&n.pass===o)return n.user===e&&n.pass===o})?($(".btn-login").text("Verifying...please waiting!"),setTimeout(()=>{$(".btn-go").css({display:"block"}).attr({"data-bs-toggle":"modal"})},1e3)):($(".label-user").text("Không khớp thông tin tài khoản!"),$(".label-pass").text("Không khớp thông tin tài khoản!"))}),$(".btn-go").on("click",()=>{$(".user").val(""),$(".password").val(""),$(".btn-go").css({display:"none"}).removeAttr("data-bs-toggle"),$(".btn-login").text("Login"),$(".content").css({display:"block"}),$(".title").css({display:"none"}),axios.get("/users").then(e=>{$(".content-add").remove(),a(e,n,t),s(e)}),event.preventDefault()}),event.preventDefault()}),$(".btn-add").on("click",()=>{let e=$(".fullname").val(),o=$(".gender").val(),l=$(".age").val(),r=$(".email").val(),i=$(".phone").val();""===e||""===o||""===l||""==r||""===i?alert("Không được để trống thông tin!"):(axios.post("/users",user(e,o,l,r,i)).then(e=>console.log(e)),axios.get("/users").then(e=>{$(".content-add").remove(),$(".pager").remove(),a(e,n,t),s(e)})),event.preventDefault()}),$(".input-person").on("input",()=>{let e=$(".input-person").val();axios.get(`/users?q=${e}`).then(e=>{$(".content-add").remove(),a(e,n,t)})})});